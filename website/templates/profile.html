{%extends 'base.html'%}

{%block title%}Profile{%endblock%}

{%block content%}
<h1 align="center">Profile</h1>
<h3 align="center">Credit: {{user.credit}}</h3>
<div align="center" style="display: flex; justify-content: center;">
    <form action="/add_credit" method="post">
        <div style="padding: 5px;">
            <input type="number" min="0" name="add_credit" id="add_credit" placeholder="Add Credit">
        </div>
        <button type="submit">Add Credit</button>
    </form>
    <form action="/withdraw_credit" method="post">
        <div style="padding: 5px;">
            <input type="number" min="0" name="withdraw_credit" id="withdraw_credit" placeholder="Withdraw Credit">
        </div>
        <button type="submit">Withdraw Credit</button>
    </form>
</div>
<br>
<hr>
<div style="display: flex; justify-content: space-around;">
    <div>
        <h2>ML Tasks</h2>
        {%if user.datasets | length < 1 %}
            <p>Hi {{user.first_name.capitalize()}}, you have no uploaded datasets</p>
        {%endif%}
        {%for dataset in user.datasets%}
        <li>Dataset Name: {{dataset.dataset_name}}
        <button type="button" class="close" onclick="deleteDataset({{dataset.id}})">
            <span>&times;</span>
        </button>
        <button type="button" onclick="editDataset({{dataset.id}})">
            <span style="font-size:20px">&#9999;</span>
        </button>
        <ul>
            <li>Info: {{dataset.info}}</li>
            <li>Filepath: {{dataset.file_path}}</li>
            <li>Model Type: {{dataset.model_type.capitalize()}}</li>
            <li>Target: {{dataset.target}}</li>
            <li>Public Bid: {{dataset.public_bid}}</li>
            <li>Tags: {{dataset.tags}}</li>
            {% if dataset.model_type == 'classification'%}
                <li>Accuracy: {{dataset.result}}</li>
            {%elif dataset.model_type == 'regression'%}
                <li>RMSE: {{dataset.result}}</li>
            {%endif%}
            <li>Date Uploaded: {{dataset.date}}</li>
        </ul>
        </li>
        <br>
        {%endfor%}
        <br>
        <a href="{{url_for('uploads.upload_dataset')}}" align="center" appearance="button" 
                style="color: white;
                background-color: blue;
                margin: 10px;
                padding: 10px;
                border-radius: 15px;
                position: relative;
                left: 50%;
                text-decoration: none;">Upload Your Task</a>

    </div>
    <div>
        <h2>Features</h2>
        {%if user.features | length < 1 %}
            <p>Hi {{user.first_name.capitalize()}}, you have no uploaded features</p>
        {%endif%}
        {%for feature in user.features%}
        <li>Feature Name: {{feature.feature_name}}
            <button type="button" class="close" onclick="deleteFeature({{feature.id}})">
                <span>&times;</span>
            </button>
            <button type="button" onclick="editDataset({{feature.id}})">
                <span style="font-size:20px">&#9999;</span>
            </button>
            <ul>
                <li>Info: {{feature.info}}</li>
                <li>Filepath: {{feature.file_path}}</li>
                <li>Tags: {{feature.tags}}</li>
                <li>Date Uploaded: {{feature.date}}</li>
            </ul>
        </li>
        <br>
        {%endfor%}
        <br>
        <a href="{{url_for('uploads.upload_feature')}}" align="center" appearance="button" 
                style="color: white;
                background-color: blue;
                margin: 10px;
                padding: 10px;
                border-radius: 15px;
                position: relative;
                left: 50%;
                text-decoration: none;">Upload Your Feature</a>
    </div>
</div>

{%endblock%}
